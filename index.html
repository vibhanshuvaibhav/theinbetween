<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The In-Between — Rest</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500&display=swap" rel="stylesheet">
<style>
html,body{
  margin:0;
  padding:0;
  background:#0b0f0d;
  overflow:hidden;
  touch-action:none;
  font-family:'Playfair Display',serif;
}
canvas{display:block;}
.ui{
  position:absolute;width:100%;text-align:center;
  color:rgba(255,255,255,0.75);
  pointer-events:none;
}
#hint{top:14px;font-size:15px;letter-spacing:0.06em;}
#done{top:50%;transform:translateY(-50%);font-size:22px;display:none;}
#privacy{bottom:12px;font-size:11px;opacity:0.4;}
#reset{
  position:absolute;bottom:36px;width:100%;
  text-align:center;font-size:13px;opacity:0.6;
  cursor:pointer;pointer-events:auto;display:none;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>
<div class="ui" id="hint">help crow (mind) have some water (rest)</div>
<div class="ui" id="done">well done. let’s get back to work.</div>
<div id="reset" onclick="reset()">reset</div>
<div class="ui" id="privacy">no tracking · no data · nothing stored</div>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
let w,h,dpr;

function resize(){
 dpr=window.devicePixelRatio||1;
 w=innerWidth;h=innerHeight;
 canvas.width=w*dpr;canvas.height=h*dpr;
 canvas.style.width=w+"px";canvas.style.height=h+"px";
 ctx.setTransform(dpr,0,0,dpr,0,0);
}
window.onresize=resize;resize();

const jar={x:()=>w/2,y:()=>h*0.42,w:120,h:220,water:0};
let stones=[];
const TOTAL=60;

function init(){
 stones=[];
 for(let i=0;i<TOTAL;i++){
  const side=i<30?-1:1;
  stones.push({
   x:jar.x()+side*120,
   y:h*0.6+(i%30)*10,
   r:7,
   in:false
  });
 }
 jar.water=0;
 document.getElementById("done").style.display="none";
 document.getElementById("reset").style.display="none";
}
init();

let drag=null;

canvas.onpointerdown=e=>{
 startSound();
 const x=e.clientX,y=e.clientY;
 for(const s of stones){
  if(!s.in && Math.hypot(x-s.x,y-s.y)<s.r+8){drag=s;break;}
 }
};

canvas.onpointermove=e=>{
 if(drag){drag.x=e.clientX;drag.y=e.clientY;}
};

canvas.onpointerup=()=>{
 if(drag){
  if(
   drag.x>jar.x()-jar.w/2 &&
   drag.x<jar.x()+jar.w/2 &&
   drag.y>jar.y()-jar.h/2 &&
   drag.y<jar.y()+jar.h/2
  ){
   drag.in=true;
   jar.water++;
  }
 }
 drag=null;
};

function draw(){
 ctx.clearRect(0,0,w,h);

 // sky
 ctx.fillStyle="#0b0f0d";
 ctx.fillRect(0,0,w,h);

 // ground
 ctx.fillStyle="#123a2a";
 ctx.fillRect(0,h*0.7,w,h);

 // jar
 ctx.strokeStyle="rgba(200,200,200,0.6)";
 ctx.lineWidth=2;
 ctx.strokeRect(jar.x()-jar.w/2,jar.y()-jar.h/2,jar.w,jar.h);

 // water
 const waterHeight=(jar.water/TOTAL)*jar.h;
 ctx.fillStyle="rgba(100,160,180,0.6)";
 ctx.fillRect(jar.x()-jar.w/2,jar.y()+jar.h/2-waterHeight,jar.w,waterHeight);

 // crow
 ctx.fillStyle="rgba(0,0,0,0.7)";
 ctx.beginPath();
 ctx.arc(jar.x(),jar.y()-jar.h/2-16,8,0,Math.PI*2);
 ctx.fill();

 // stones
 for(const s of stones){
  if(s.in)continue;
  ctx.fillStyle="rgba(190,190,190,0.9)";
  ctx.beginPath();
  ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
  ctx.fill();
 }

 if(jar.water>=TOTAL){
  document.getElementById("done").style.display="block";
  document.getElementById("reset").style.display="block";
 }

 requestAnimationFrame(draw);
}
draw();

function reset(){init();}

/* soft ambient tone */
let audioStarted=false;
let ctxAudio,osc,gain;
function startSound(){
 if(audioStarted)return;
 audioStarted=true;
 ctxAudio=new AudioContext();
 osc=ctxAudio.createOscillator();
 osc.frequency.value=120;
 osc.type="sine";
 gain=ctxAudio.createGain();
 gain.gain.value=0.04;
 osc.connect(gain).connect(ctxAudio.destination);
 osc.start();
}
</script>
</body>
</html>
