<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The In-Between | Balance</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.js"></script>
    <style>
        body { margin: 0; padding: 0; background: #050505; overflow: hidden; cursor: none; }
        
        /* iPhone Style Message Bubble */
        #msg-container {
            position: absolute;
            pointer-events: none;
            display: none;
            z-index: 100;
        }

        .ios-bubble {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 0.5px solid rgba(255, 255, 255, 0.2);
            padding: 8px 14px;
            border-radius: 18px;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            font-size: 13px;
            letter-spacing: -0.2px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* The small tail of the bubble */
        .ios-bubble::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 20px;
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            clip-path: polygon(0 0, 100% 0, 50% 100%);
        }

        #instruction {
            position: absolute; width: 100%; bottom: 40px;
            color: #333; font-family: sans-serif;
            text-align: center; letter-spacing: 5px;
            font-size: 0.6rem; text-transform: uppercase;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="msg-container">
        <div class="ios-bubble">follow me</div>
    </div>

    <div id="instruction">Keep the white centered</div>

    <script>
        let gold, red, white;
        let angle = 0;
        let msg;

        function setup() {
            createCanvas(windowWidth, windowHeight);
            gold = createVector(width / 2, height / 2);
            red = createVector(width / 2, height / 2);
            white = createVector(width / 2, height / 2);
            msg = document.getElementById('msg-container');
        }

        function draw() {
            background(5, 5, 5, 45); 

            // 1. GOLDEN DOT - Elegant, unpredictable drift
            angle += 0.008;
            gold.x = width/2 + cos(angle) * (width * 0.35) * sin(angle * 0.5);
            gold.y = height/2 + sin(angle * 0.7) * (height * 0.35);

            // 2. RED DOT - Controlled by User
            let targetRed = createVector(mouseX, mouseY);
            red.lerp(targetRed, 0.15); 

            // 3. WHITE DOT - The Balance point
            let midpoint = p5.Vector.lerp(gold, red, 0.5);
            white.lerp(midpoint, 0.2);

            // Logic: Is the user failing?
            let error = dist(white.x, white.y, midpoint.x, midpoint.y);
            
            if (error > 35) {
                msg.style.display = 'block';
                msg.style.left = (gold.x + 15) + 'px';
                msg.style.top = (gold.y - 45) + 'px';
            } else {
                msg.style.display = 'none';
            }

            drawDots();
        }

        function drawDots() {
            // Connection line
            stroke(255, 255, 255, 8);
            line(gold.x, gold.y, red.x, red.y);

            // Gold Dot
            noStroke();
            fill(212, 175, 55); 
            ellipse(gold.x, gold.y, 14, 14);
            // Gold Outer Glow
            fill(212, 175, 55, 20);
            ellipse(gold.x, gold.y, 30, 30);

            // Red Dot
            fill(200, 50, 50);
            ellipse(red.x, red.y, 10, 10);

            // White Dot
            fill(255);
            ellipse(white.x, white.y, 8, 8);
            fill(255, 255, 255, 40);
            ellipse(white.x, white.y, 22, 22);
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
    </script>
</body>
</html>
